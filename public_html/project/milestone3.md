<table><tr><td> <em>Assignment: </em> IT202 Milestone 3 Shop Project</td></tr>
<tr><td> <em>Student: </em> Akashdeep Singh (as4234)</td></tr>
<tr><td> <em>Generated: </em> 5/5/2023 4:24:21 PM</td></tr>
<tr><td> <em>Grading Link: </em> <a rel="noreferrer noopener" href="https://learn.ethereallab.app/homework/IT202-008-S23/it202-milestone-3-shop-project/grade/as4234" target="_blank">Grading</a></td></tr></table>
<table><tr><td> <em>Instructions: </em> <ol><li>Checkout Milestone3 branch</li><li>Create a new markdown file called milestone3.md</li><li>git add/commit/push immediate</li><li>Fill in the below deliverables</li><li>At the end copy the markdown and paste it into milestone3.md</li><li>Add/commit/push the changes to Milestone3</li><li>PR Milestone3 to dev and verify</li><li>PR dev to prod and verify</li><li>Checkout dev locally and pull changes to get ready for Milestone 4</li><li>Submit the direct link to this new milestone3.md file from your GitHub prod branch to Canvas</li></ol><p>Note: Ensure all images appear properly on GitHub and everywhere else. Images are only accepted from dev or prod, not localhost. All website links must be from prod (you can assume/infer this by getting your dev URL and changing dev to prod).</p></td></tr></table>
<table><tr><td> <em>Deliverable 1: </em> Orders will be able to be recorded </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add a screenshot of the Orders table with valid data in it</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236540996-f048e66c-fc88-4f1d-b215-27f690e314b3.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Orders table with valid data, from VS Code extension.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Add a screenshot of OrderItems table with validate data in it</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236541629-fbc17327-d967-4e85-85ab-a9474b350322.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of OrderItems table with valid data from VSCode extension<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 3: </em> Add a screenshot of the purchase form UI from Heroku</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236542610-4152f422-42f3-4fdb-bb7b-eed981a7459f.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of Checkout form from heroku dev, valid data filled in.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 4: </em> Add a screenshot showing the items pending purchase from Heroku</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236543630-441904b5-1ab5-4031-ac6f-d8cd71ea371a.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the items pending purchase, also demoing %difference of price for out<br>of date priced items in cart. Heroku dev url visible. All parts are<br>included in this screenshot<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 5: </em> Add a screenshot showing the Order Process validations from the code</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236551157-1521c1d3-15e9-4d08-97c2-a851b31c7677.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of code snippet that verifies payment method for that order.<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236551541-702e1b68-c7f2-47db-9d23-3b621da925be.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Validation to check if user can purchase item, i.e payment amount is greater<br>than total cost.<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236551818-ca9f7987-8655-45f2-9510-24be2d22af76.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Basic validation for each of the address pieces.<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236550825-f9ca0b66-a422-4f2e-8ecb-eeb166e7e449.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of code snippet that verifies price and stock of each item in<br>cart.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 6: </em> Add a screenshot showing the Order Process validations from the UI (Heroku)</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236552495-70de997a-6f4b-4665-abee-ec665320a6d1.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Price difference message, from heroku dev.<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236552863-8a3e17af-8c88-45c4-b8de-e94d2e37b27a.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Error when user tries to buy Out of Stock item. Heroku dev url<br>visible.<br></p>
</td></tr>
<tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236554687-33aaaa76-c826-4ab9-9035-b9f17cd111c3.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Insufficient payment received error. Heroku dev url visible.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 7: </em> Briefly describe the code flow/process of the purchase process</td></tr>
<tr><td> <em>Response:</em> <ol><li>Verify whether the user is logged in. If not, redirect them to the<br>login page.</li><li>Retrieve the shopping cart data from the database and determine the total<br>cost of the items in the cart.</li><li>Check if the user has enough funds<br>in their account to pay for the items in the cart. If not,<br>redirect them back to the cart page with an error message.</li><li>Verify if there<br>is sufficient stock for the items in the cart. If not, redirect them<br>back to the cart page with an error message.</li><li>Update the database with the<br>new stock levels for the items in the cart and generate a new<br>order in the Orders table containing the user's details and the total cost<br>of the order.</li><li>Insert each item in the cart into the OrderItems table, along<br>with the order ID, product ID, quantity, and unit price.</li><li>If all of the<br>previous steps were successful, save the changes to the database. If not, undo<br>the transaction and redirect the user back to the cart page with an<br>error message.</li></ol><br></td></tr>
<tr><td> <em>Sub-Task 8: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/singak1/IT202-008/pull/72">https://github.com/singak1/IT202-008/pull/72</a> </td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/singak1/IT202-008/pull/73">https://github.com/singak1/IT202-008/pull/73</a> </td></tr>
<tr><td> <em>Sub-Task 9: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://as4234-prod.herokuapp.com/project/checkout.php">https://as4234-prod.herokuapp.com/project/checkout.php</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 2: </em> Order Confirmation Page </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Screenshot showing the order details from the purchase form and the related items that were purchased with a thank you message</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236555841-ab59a3b1-4d43-4772-bdc4-00b4c3ba66b6.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the order confirmation page, with all the order info, all the<br>checklist items visible in this screenshot. Heorku dev url visible.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Briefly explain how this information is retrieved and displayed from a code logic perspective</td></tr>
<tr><td> <em>Response:</em> <p>We start by checking if the user is logged in and <br>redirects to<br>the login page if not. Then we retrieve the user&#39;s orders <br>from the<br>database and formats them to display on the confirmation page. <br>Each order is<br>displayed in a card, showing the order number, shipping <br>address, payment method, payment<br>received, and a table of items ordered <br>with their respective quantities, prices, and<br>subtotals. The page also <br>includes a total cost for each order. Finally, an<br>animated &quot;Thank You&quot; <br>image is displayed at the bottom of the page. The<br>script uses some <br>helper functions from other PHP files to format the output<br>and handle <br>errors.<br></p><br></td></tr>
<tr><td> <em>Sub-Task 3: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/singak1/IT202-008/pull/73">https://github.com/singak1/IT202-008/pull/73</a> </td></tr>
<tr><td> <em>Sub-Task 4: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://as4234-prod.herokuapp.com/project/order_confirmation.php">https://as4234-prod.herokuapp.com/project/order_confirmation.php</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 3: </em> User will be able to see their Purchase History </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add a screenshot showing purchase history for a user</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236557082-a90016d6-9004-4de9-944a-9d07c1ee94d9.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screen shot of purchase history page for a user, contains an order details<br>button. Heroku dev url visible.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Add a screenshot showing full details of a purchase (Order Details Page)</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236557384-86265e3f-0224-48ee-b1d6-b00c1f46164f.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the order details page, used the most recent order from above<br>screenshot. Heroku dev url visible.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 3: </em> Briefly explain the logic for showing the purchase list and click/displaying the Order Details</td></tr>
<tr><td> <em>Response:</em> <p>We start again by checking if a user is logged in, otherwise, a<br><br>warning message will be flashed and the user will be redirected to the<br><br>login page. The code then queries the database for the user&#39;s orders, <br>and<br>for each order, it retrieves the details of the items ordered, such <br>as<br>name, quantity, price, and subtotal. The order details are displayed <br>in a responsive<br>card layout, showing the order ID, payment method, <br>amount received, shipping address, and<br>a button to view the order <br>details. If no orders are found, an<br>info message is displayed instead. This page only contains some condensed info about<br>the code. When the order details button is clicked the user is redirected<br>to a page with a GET request that contains the order id. On<br>the order details side, we query the OrderItems table and get all the<br>info for the items purchased with that order id and display it to<br>the user.<br><br></p><br></td></tr>
<tr><td> <em>Sub-Task 4: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/singak1/IT202-008/pull/74">https://github.com/singak1/IT202-008/pull/74</a> </td></tr>
<tr><td> <em>Sub-Task 5: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://as4234-prod.herokuapp.com/project/purchase_history.php">https://as4234-prod.herokuapp.com/project/purchase_history.php</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 4: </em> Store Owner Purchase History </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add a screenshot showing purchase history from multiple users</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236558861-c4aeeed8-2a62-462b-85fd-500f98b2f173.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot for the purchase history for the entire shop, has 2 users info<br>here, clickable order details button and the username of user who purchased order.<br>Heroku dev url visible.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Add a screenshot showing full details of a purchase (Order Details Page)</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236559300-bd79c6c4-3c9c-4bc2-b788-e6c067d3543d.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of order details page for an order made by a user that<br>is different than the shop owner. Heroku URL visible.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 3: </em> Briefly explain the logic for showing the purchase list and click/displaying the Order Details (mostly how it differs from the user's purchase history feature)</td></tr>
<tr><td> <em>Response:</em> <p>The list of orders has the same query as the one for the<br>user purchase history <b>except the fact that we dont include the WHERE clause<br>for user_id</b>, this gives us all the records in the orders table. We<br>then JOIN the Users table with orders table on user_id, and retrieve the<br>username from the users table. All other info is the same as purchase<br>history page.<br><br><b>I am using the same order details page as purchase history.</b> To<br>avoid the errors when a store owner tries to view an order for<br>an user other than themselves, I used the has_role() function we made in<br>Milestone1 to check if the user is an admin or a store owner,<br>if they are we dont bind the user_id to the query and hence<br>remove the limitation of the logged in user to only view their own<br>order details. <b>If the user isn&#39;t an admin or shop owner then we<br>concatenate the query with &quot; AND Orders.user_id = :uid&quot;</b> so that users can<br>only view their own order details.<br><br></p><br></td></tr>
<tr><td> <em>Sub-Task 4: </em> Add related pull request link(s)</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://github.com/singak1/IT202-008/pull/75">https://github.com/singak1/IT202-008/pull/75</a> </td></tr>
<tr><td> <em>Sub-Task 5: </em> Add a direct link to heroku prod for this file</td></tr>
<tr><td> <a rel="noreferrer noopener" target="_blank" href="https://as4234-prod.herokuapp.com/project/order_details.php?orderid=21">https://as4234-prod.herokuapp.com/project/order_details.php?orderid=21</a> </td></tr>
</table></td></tr>
<table><tr><td> <em>Deliverable 5: </em> Misc </td></tr><tr><td><em>Status: </em> <img width="100" height="20" src="https://user-images.githubusercontent.com/54863474/211707773-e6aef7cb-d5b2-4053-bbb1-b09fc609041e.png"></td></tr>
<tr><td><table><tr><td> <em>Sub-Task 1: </em> Add screenshot of the Cart page showing the button to place an order</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236561209-2129c127-4bac-4777-b394-b520b67bcb61.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the proceed to checkout button from cart. Heroku dev url visible.<br></p>
</td></tr>
</table></td></tr>
<tr><td> <em>Sub-Task 2: </em> Add screenshots showing which issues are done/closed (project board) Incomplete Issues should not be closed (Milestone3 issues)</td></tr>
<tr><td><table><tr><td><img width="768px" src="https://user-images.githubusercontent.com/112450716/236561609-ae39de46-5572-4f20-bf76-4df7e62a4cda.png"/></td></tr>
<tr><td> <em>Caption:</em> <p>Screenshot of the project board, all items are marked as close under Milestone3-&gt;Done<br>column.<br></p>
</td></tr>
</table></td></tr>
</table></td></tr>
<table><tr><td><em>Grading Link: </em><a rel="noreferrer noopener" href="https://learn.ethereallab.app/homework/IT202-008-S23/it202-milestone-3-shop-project/grade/as4234" target="_blank">Grading</a></td></tr></table>